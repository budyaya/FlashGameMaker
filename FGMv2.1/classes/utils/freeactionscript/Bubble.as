/** * Realistic Floating Soap Bubbles * --------------------- * VERSION: 1.0 * DATE: 8/25/2010 * AS3 * UPDATES AND DOCUMENTATION AT: http://www.FreeActionScript.com **/package utils.freeactionscript{	import flash.display.Bitmap;	import flash.display.PixelSnapping;	import flash.display.Sprite;	import flash.events.Event;	import flash.filters.BlurFilter;		import com.greensock.TweenMax;		public class Bubble extends Sprite	{		private var _bitmap:Bitmap;		private var _container:Sprite;		private var _mask:Sprite;				private var minSize:int = 10;		private var dx:Number;		private var dy:Number;				private var _popScale:Number = 2;		private var _popDuration:Number = .2;		private var _minD:Number = -2;		private var _maxD:Number = 2;		private var _maxDisplacement:Number = .5;				public function Bubble()		{			_container = new Sprite;			_bitmap = new Bitmap(new BubbleBitmap(0,0));			_bitmap.smoothing = true;						var maxSize:int = _bitmap.width;						var range:int = maxSize - minSize;			_container.scaleX = _container.scaleY = (minSize + Math.random() * range) / maxSize;						addChild(_container);			_container.addChild(_bitmap);						_container.x = -int(_container.width / 2);			_container.y = -int(_container.height / 2);		}				public function get radius():Number		{			return _container.width / 2;		}				public function pop():void		{			_mask = new BubblePopMask();			_container.addChild(_mask);			_bitmap.mask = _mask;						TweenMax.to(this, _popDuration, {scaleX: _popScale, scaleY: _popScale, alpha: 0, onComplete: onPopComplete});			_container.filters = [new BlurFilter(2, 2, 1)];		}				public function destroy():void		{			TweenMax.killTweensOf(this);		}				private function onPopComplete():void		{			dispatchEvent(new Event(Event.COMPLETE));		}	}}